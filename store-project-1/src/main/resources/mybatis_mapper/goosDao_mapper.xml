<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.demo.dao.goods.GoodsDao" >
	<resultMap type="com.example.demo.dto.goods.GoodsDto" id="goodsResult">
		<result column="GOODS_ID" jdbcType="VARCHAR" property="goodsId"/>
		<result column="GOODS_NAME" jdbcType="VARCHAR" property="goodsName"/>
		<result column="GOODS_DESCRIBE" jdbcType="VARCHAR" property="goodsDescribe"/>
		<result column="GOODS_PRICE" jdbcType="DECIMAL" property="goodsPrice"/>
		<association property="goodsImage" javaType="com.example.demo.dto.goods.GoodsImageDto">
			<result column="IMAGE_ID" jdbcType="VARCHAR" property="imageId"/>
			<result column="IMAGE_NAME" jdbcType="VARCHAR" property="imageName"/>
			<result column="IMAGE_URL" jdbcType="VARCHAR" property="imageUrl"/>
		</association>
		<association property="goodsType" javaType="com.example.demo.dto.goods.TypeDto">
			<result column="GOODS_TYPE_ID" jdbcType="VARCHAR" property="typeId"/>
			<result column="TYPE_NAME" jdbcType="VARCHAR" property="typeName"/>
			<result column="TYPE_DESC" jdbcType="VARCHAR" property="typeDesc"/>
		</association>
	</resultMap>
	
	<sql id="goodsSql">
		A.GOODS_ID,
       	A.GOODS_NAME,
       	A.GOODS_DESCRIBE,
       	A.GOODS_PRICE,
       	B.IMAGE_ID,
       	B.IMAGE_NAME,
       	B.IMAGE_URL,
       	C.GOODS_TYPE_ID,
       	C.TYPE_NAME,
       	C.TYPE_DESC
	</sql>
	
	<!-- 获取商品列表 -->
	<select id="getGoodsList" resultMap="goodsResult">
	    SELECT
	    	<include refid="goodsSql"/>
	    FROM
	    	STORE_GOODS A,
       		STORE_IMAGE B,
       		STORE_GOODS_TYPE C
      	WHERE A.IMAGE_ID = B.IMAGE_ID
   		  AND A.GOODS_TYPE_ID = C.GOODS_TYPE_ID
	</select>


</mapper>